{% extends 'base.html' %}

{% block title %} Music Generator {% endblock %}


{% block js %}
  <!-- magenta cdn -->
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@^1.0.0"></script>
  <!-- babel cdn -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js"></script>
  <!-- react cdn -->
  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <!-- react strap cdn -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reactstrap/4.8.0/reactstrap.min.js"></script>
  
  <!-- react file -->
  <script src="static/js/currentNote.jsx" type="text/babel" ></script>


{% endblock %}


{% block body %}
  
  <h4>Choose Some Notes</h4>
  <div id="show-pitches"><!-- display react radio buttons here --></div>
  
  <!-- display -->
  <div id="current-notes">
    |<span id="one">♩</span>|
    <span id="two">♩</span>|
    <span id="three">♩</span>|
    <span id="four">♩</span>|
    <span id="five">♩</span>|
    <span id="six">♩</span>|
    <span id="sev">♩</span>|
    <span id="eight">♩</span>|
  </div>
  <!-- <div id="test-notes"></div> -->


  <!-- piano roll goes below -->
  <canvas id="piano-roll"></canvas>
  <div class="container-fluid">
    <div id="current-pitchs-selection"></div>
  </div>
  <div class="container-fluid">
    <!-- control buttons -->
    <div id="basic-buttons">
        <button id="play-button" type="button" onclick="playStop()" class="btn-primary"><i class="fas fa-play-circle"></i> Play</button>
        <!-- <button id="stop-button" type="button" class="btn-danger"><i class="fas fa-stop-circle"></i> Stop</button> -->
        <!-- <button id="pause-button" type="button" class="btn-warning"><i class="fas fa-pause"></i> Pause</button> -->
        <button id="ai-play" type="button" onclick="musicone()"" class ="btn-success"><i class="fas fa-redo"></i> Generate Melody</button>
        <!-- <button id="ai-stop" type="button" class="btn-danger"><i class="fas fa-stop-circle"></i> Stop Ai</button> -->
        {% if session.get('username') %}
          <form action="saved-melody.json" name= method = "POST">
            Title: <input type="text" id="title" required name="title">
            <button id="save" type="submit"class="btn-warning"><i class="fas fa-save"></i> Save</button>
          </form>
          <h4 id="title-warning"></h4>
        {% endif %}
    </div>
  </div>

  {% if session.get('username') %}
        <p>wow i'm logged in so many cool melodies WOWOWOW</p>

        {% for melody in user_melodies %}
          <button onclick="playSavedMusic()" id="{{ melody.music_id }}">{{ melody.title}}</button>
          <li hidden id="melody-{{ melody.music_id }}">{{ melody.music_data }}</li>
        {% endfor %}
      
  {% endif %}


  
{% endblock %}
